DOCUMENT();
loadMacros(
   "PGstandard.pl",     # Standard macros for PG language
   "MathObjects.pl",
   "PGML.pl",  
   "contextLimitedComplex.pl",
   "PGchoicemacros.pl",
   "contextFraction.pl"
);
TEXT(beginproblem());
$ShowPartialCorrectAnswers = 1;

Context("Complex");
Parser::Number::NoDecimals();

Context()->variables->add(x => 'Real');
Context()->flags->set(
  reduceConstants=>0,
  reduceConstantFunctions=>0,
);

do{

do{$bb=random(-1,1,2)*random(1,8,1);
   $cc=random(-1,1,2)*random(1,7,1);
   $discrim = $bb*$bb-4*$cc;
  } 
until (($bb*$bb-4*$cc<0));

   $sr=Real(sqrt(-$discrim));
   $asr=floor($sr);
} until ($sr!=$asr);
#} until (1!=0);

do{$aa=random(-1,1,2)*random(1,5,1);}
until ($aa^2+$bb*$aa+$cc!=0);

#  f(x)=(x+a)(x^2+bx+c) = x^3+(a+b)x^2+(ab+c)x+ac
$pp=$aa+$bb; $qq=$aa*$bb+$cc; $rr=$aa*$cc;
$poly=Formula("x^3+$pp*x^2+$qq*x+$rr")->reduce;

$maa = -$aa;
$mbb = -$bb;
$mdiscrim=-$discrim;
$answer = List(Formula("x+$aa")->reduce, Formula("x-($mbb+i*sqrt($mdiscrim))/2"), Formula("x-($mbb-i*sqrt($mdiscrim))/2"));
$quot = Formula("x^2+$bb*x+$cc")->reduce;
$answerRoot = List(Formula("$maa"), Formula("($mbb+i*sqrt($mdiscrim))/2"), Formula("($mbb-i*sqrt($mdiscrim))/2"));


# $answer = Object("expression");
# Basic Object Options: Real, Point, Formula, Interval, Complex

#[`[$sr]`], [`[$asr]`], [`[$aa]`], [`[$bb]`], [`[$cc]`]

BEGIN_PGML



Find all factors of the given polynomial. Do *not* approximate your solution!

[```f(x)=[$poly]```]

An integer root of [`f(x)`] is at [`x=`][__________]{$maa}

The quotient of [`f(x)\div (x-`]root[`)`] is equal to: [__________]{$quot}

List all roots of [`f(x)`]: [__________]{$answerRoot}

List all factors of [`f(x)`]: [__________]{$answer}


* Separate multiple factors with commas.

* Write complex numbers using the imaginary unit [`i`]. For example, convert [`\sqrt{-3}`] to [`i\cdot \sqrt{3}`], etc.

END_PGML
ENDDOCUMENT();

